<%
var configRoot = config.root
configRoot = (configRoot === null || configRoot === undefined || configRoot === '/') ? '' : configRoot;
%>
<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        <% if (config.logo !== undefined && config.logo.length > 0) { %>
        <img src="<%- url_for(config.logo) %>" class="logo-img circle responsive-img">
        <% } %>
        <div class="logo-name"><%= config.title %></div>
        <div class="logo-desc">
            <% if (config.description && config.description.length > 0) { %>
            <%= config.description %>
            <% } else { %>
            Never really desperate, only the lost of the soul.
            <% } %>
        </div>
    </div>

    <%
        var menuMap = new Map();
        menuMap.set("Index", "首页");
        menuMap.set("Tags", "标签");
        menuMap.set("Categories", "分类");
        menuMap.set("Archives", "归档");
        menuMap.set("About", "关于");
        menuMap.set("Contact", "留言板");
        menuMap.set("Friends", "友情链接");
    %>

    <ul class="menu-list mobile-menu-list">
        <% Object.keys(config.menu).forEach(function(key) { %>
        <li class="m-nav-item">
	  <% if(!config.menu[key].children) { %>
		<a href="<%- url_for(config.menu[key].url) %>" class="waves-effect waves-light">
			<% if (config.menu[key].icon && config.menu[key].icon.length > 0) { %>
			    <i class="fa-fw <%- config.menu[key].icon %>"></i>
			<% } else { %>
				<i class="fas fa-fw fa-link"></i>
			<% } %>
			<%- (config.language === 'zh-CN' && menuMap.has(key)) ? menuMap.get(key) : key %>
		</a>
          <% } else { %>
		<a href="javascript:;">
			<% if (config.menu[key].icon && config.menu[key].icon.length > 0) { %>
				<i class="fa-fw <%- config.menu[key].icon %>"></i>
			<% } else { %>
				<i class="fas fa-fw fa-link"></i>
			<% } %>
			<%- (config.language === 'zh-CN' && menuMap.has(key)) ? menuMap.get(key) : key %>
			<span class="m-icon"><i class="fas fa-chevron-right"></i></span>
		</a>
            <ul <%if(config.navMenu&&config.navMenu.bgColor){%> style="background: <%-config.navMenu.bgColor%>;"<%}%> >
              <% for(let childrenLink of config.menu[key].children){ %>
                <li>

                  <a href="<%- url_for(childrenLink.url)%> " style="margin-left:<% if (config.navMenu && config.navMenu.mleft) {%>50px<%}else{%>75px<%}%>">
				  <% if (childrenLink.icon && childrenLink.icon.length > 0) { %>
				   <i class="fa <%- childrenLink.icon %>" style="position: absolute;left:<%if(config.navMenu&&config.navMenu.mleft){%>28px<%}else{%>50px<%}%>" ></i>
			      <% } %>
		          <span><%- childrenLink.name %></span>
                  </a>
                </li>
              <% } %>
            </ul>
          <% } %>
        </li>
        <% }); %>
    </ul>
</div>
